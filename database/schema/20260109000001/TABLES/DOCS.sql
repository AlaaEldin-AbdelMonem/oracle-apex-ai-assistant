--------------------------------------------------------
--  DDL for Table DOCS
--------------------------------------------------------

  CREATE TABLE "DOCS" 
   (	"DOC_ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"DOC_TITLE" VARCHAR2(500 BYTE) COLLATE "USING_NLS_COMP", 
	"DOC_DESCRIPTION" VARCHAR2(2000 BYTE) COLLATE "USING_NLS_COMP", 
	"DOC_CATEGORY" VARCHAR2(100 BYTE) COLLATE "USING_NLS_COMP", 
	"DOC_TOPIC" VARCHAR2(200 BYTE) COLLATE "USING_NLS_COMP", 
	"DOC_TAGS" VARCHAR2(500 BYTE) COLLATE "USING_NLS_COMP", 
	"FILE_NAME" VARCHAR2(255 BYTE) COLLATE "USING_NLS_COMP", 
	"FILE_MIME_TYPE" VARCHAR2(255 BYTE) COLLATE "USING_NLS_COMP", 
	"FILE_BLOB" BLOB, 
	"FILE_SIZE" NUMBER, 
	"TEXT_EXTRACTED" CLOB COLLATE "USING_NLS_COMP", 
	"TEXT_SUMMARY" CLOB COLLATE "USING_NLS_COMP", 
	"TEXT_SUMMARY_VECTOR" VECTOR(768, *), 
	"CLASSIFICATION_LEVEL" NUMBER, 
	"DOC_STATUS" VARCHAR2(30 BYTE) COLLATE "USING_NLS_COMP" DEFAULT 'DRAFT', 
	"SOURCE_SYSTEM" VARCHAR2(100 BYTE) COLLATE "USING_NLS_COMP", 
	"LANGUAGE_CODE" VARCHAR2(10 BYTE) COLLATE "USING_NLS_COMP", 
	"RELATED_PROJECT" VARCHAR2(100 BYTE) COLLATE "USING_NLS_COMP", 
	"FILE_VERSION_NO" NUMBER DEFAULT 1, 
	"FILE_VERSION_LABEL" VARCHAR2(50 BYTE) COLLATE "USING_NLS_COMP", 
	"LAST_UPDATED_VERSION" NUMBER, 
	"APPROVAL_USER" VARCHAR2(100 BYTE) COLLATE "USING_NLS_COMP", 
	"APPROVAL_DATE" DATE, 
	"EMBEDDING_MODEL" VARCHAR2(100 BYTE) COLLATE "USING_NLS_COMP", 
	"SUMMARY_MODEL" VARCHAR2(100 BYTE) COLLATE "USING_NLS_COMP", 
	"RAG_READY_FLAG" CHAR(1 BYTE) COLLATE "USING_NLS_COMP" DEFAULT 'N', 
	"VECTOR_INDEXED_FLAG" CHAR(1 BYTE) COLLATE "USING_NLS_COMP" DEFAULT 'N', 
	"RETENTION_PERIOD_DAYS" NUMBER, 
	"AUDIT_REFERENCE" VARCHAR2(100 BYTE) COLLATE "USING_NLS_COMP", 
	"CREATED_BY" VARCHAR2(100 BYTE) COLLATE "USING_NLS_COMP", 
	"CREATED_AT" TIMESTAMP (6) DEFAULT SYSTIMESTAMP, 
	"UPDATED_AT" TIMESTAMP (6), 
	"IS_ACTIVE" CHAR(1 BYTE) COLLATE "USING_NLS_COMP" DEFAULT 'Y', 
	"EMBEDDING_COUNT" NUMBER DEFAULT 0, 
	"UPDATED_BY" VARCHAR2(100 BYTE) COLLATE "USING_NLS_COMP", 
	"CHUNKING_STRATEGY" VARCHAR2(30 BYTE) COLLATE "USING_NLS_COMP", 
	"CHUNK_SIZE_OVERRIDE" NUMBER, 
	"OVERLAP_PCT_OVERRIDE" NUMBER, 
	"CHUNKING_NOTES" VARCHAR2(1000 BYTE) COLLATE "USING_NLS_COMP", 
	"LAST_CHUNKED_AT" TIMESTAMP (6), 
	"LAST_CHUNKING_STRATEGY" VARCHAR2(30 BYTE) COLLATE "USING_NLS_COMP", 
	"CREATED_DATE" DATE DEFAULT SYSDATE, 
	"LAST_UPDATED_DATE" DATE DEFAULT SYSDATE, 
	"LAST_UPDATED_BY" VARCHAR2(255 BYTE) COLLATE "USING_NLS_COMP" DEFAULT USER, 
	"CHUNK_STATS_JSON" VARCHAR2(1000 BYTE) COLLATE "USING_NLS_COMP", 
	"CHUNK_STATS_UPDATED_AT" TIMESTAMP (6), 
	"RECOMMENDED_STRATEGY" VARCHAR2(50 BYTE) COLLATE "USING_NLS_COMP", 
	"RECOMMENDATION_REASON" VARCHAR2(4000 BYTE) COLLATE "USING_NLS_COMP", 
	"RECOMMENDATION_CONFIDENCE" NUMBER, 
	"RECOMMENDATION_UPDATED_AT" TIMESTAMP (6), 
	"TEXT_ORIGINAL" CLOB COLLATE "USING_NLS_COMP", 
	"ENHANCEMENT_APPLIED" VARCHAR2(1 BYTE) COLLATE "USING_NLS_COMP" DEFAULT 'N', 
	"ENHANCEMENT_STEPS" VARCHAR2(4000 BYTE) COLLATE "USING_NLS_COMP", 
	"ENHANCEMENT_STATS" JSON, 
	"ENHANCEMENT_TIMESTAMP" TIMESTAMP (6), 
	"LANGUAGE_DETECTED" VARCHAR2(10 BYTE) COLLATE "USING_NLS_COMP", 
	"TEXT_QUALITY_SCORE" NUMBER(3,2), 
	"STRUCTURE_DETECTED" VARCHAR2(100 BYTE) COLLATE "USING_NLS_COMP", 
	"DOC_TOC_JSON" JSON, 
	"DOC_INDEX_JSON" JSON, 
	"DOC_INTRODUCTION" CLOB COLLATE "USING_NLS_COMP", 
	"DOC_EXECUTIVE_SUMMARY" CLOB COLLATE "USING_NLS_COMP", 
	"DOC_PREFACE" CLOB COLLATE "USING_NLS_COMP", 
	"HAS_STRUCTURED_SECTIONS" VARCHAR2(1 BYTE) COLLATE "USING_NLS_COMP" DEFAULT 'N', 
	"SECTION_MARKERS_JSON" JSON, 
	"FRONT_MATTER_REMOVED" VARCHAR2(1 BYTE) COLLATE "USING_NLS_COMP" DEFAULT 'N', 
	"SENSITIVITY_LEVEL" NUMBER
   )  DEFAULT COLLATION "USING_NLS_COMP" SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 10 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
 LOB ("FILE_BLOB") STORE AS SECUREFILE (ENABLE STORAGE IN ROW 4000 CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("TEXT_EXTRACTED") STORE AS SECUREFILE (ENABLE STORAGE IN ROW 4000 CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("TEXT_SUMMARY") STORE AS SECUREFILE (ENABLE STORAGE IN ROW 4000 CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 VECTOR ("TEXT_SUMMARY_VECTOR") STORE AS ( CHUNK 8192 RETENTION MIN 1800
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("TEXT_ORIGINAL") STORE AS SECUREFILE (ENABLE STORAGE IN ROW 4000 CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 JSON ("ENHANCEMENT_STATS") STORE AS ( CHUNK 8192 RETENTION MIN 1800
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 JSON ("DOC_TOC_JSON") STORE AS ( CHUNK 8192 RETENTION MIN 1800
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 JSON ("DOC_INDEX_JSON") STORE AS ( CHUNK 8192 RETENTION MIN 1800
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("DOC_INTRODUCTION") STORE AS SECUREFILE (ENABLE STORAGE IN ROW 4000 CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("DOC_EXECUTIVE_SUMMARY") STORE AS SECUREFILE (ENABLE STORAGE IN ROW 4000 CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 LOB ("DOC_PREFACE") STORE AS SECUREFILE (ENABLE STORAGE IN ROW 4000 CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) 
 JSON ("SECTION_MARKERS_JSON") STORE AS ( CHUNK 8192 RETENTION MIN 1800
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;

   COMMENT ON COLUMN "DOCS"."IS_ACTIVE" IS 'Active status flag: Y=Active, N=Inactive (soft delete)';
   COMMENT ON COLUMN "DOCS"."CHUNKING_STRATEGY" IS 'Chunking strategy to use for this document (NULL = auto-detect)';
   COMMENT ON COLUMN "DOCS"."CHUNK_SIZE_OVERRIDE" IS 'Override default chunk size for this document';
   COMMENT ON COLUMN "DOCS"."OVERLAP_PCT_OVERRIDE" IS 'Override default overlap percentage';
   COMMENT ON COLUMN "DOCS"."LAST_CHUNKED_AT" IS 'Timestamp of last chunking operation';
   COMMENT ON COLUMN "DOCS"."LAST_CHUNKING_STRATEGY" IS 'Strategy actually used in last chunking';
   COMMENT ON COLUMN "DOCS"."CHUNK_STATS_JSON" IS 'Cached chunk statistics: {"avg_size":1894,"min_size":512,"max_size":3231,"count":184}';
   COMMENT ON COLUMN "DOCS"."RECOMMENDED_STRATEGY" IS 'Cached chunking strategy recommendation from rag_chunk_strategy_pkg';
   COMMENT ON COLUMN "DOCS"."RECOMMENDATION_REASON" IS 'Explanation for why this strategy was recommended';
   COMMENT ON COLUMN "DOCS"."RECOMMENDATION_CONFIDENCE" IS 'Confidence score (0-100) for the recommendation';
   COMMENT ON COLUMN "DOCS"."RECOMMENDATION_UPDATED_AT" IS 'When the recommendation was last calculated';
   COMMENT ON COLUMN "DOCS"."TEXT_ORIGINAL" IS 'Original extracted text before enhancement';
   COMMENT ON COLUMN "DOCS"."ENHANCEMENT_APPLIED" IS 'Y/N flag indicating if text enhancement was applied';
   COMMENT ON COLUMN "DOCS"."ENHANCEMENT_STEPS" IS 'Comma-separated list of enhancement steps applied';
   COMMENT ON COLUMN "DOCS"."ENHANCEMENT_STATS" IS 'JSON object with before/after statistics';
   COMMENT ON COLUMN "DOCS"."LANGUAGE_DETECTED" IS 'ISO language code detected (en, ar, fr, etc.)';
   COMMENT ON COLUMN "DOCS"."TEXT_QUALITY_SCORE" IS 'Quality score 0-1 (1=highest quality)';
   COMMENT ON COLUMN "DOCS"."STRUCTURE_DETECTED" IS 'Document structure type (report, code, manual, etc.)';
   COMMENT ON COLUMN "DOCS"."DOC_TOC_JSON" IS 'Extracted table of contents as structured JSON';
   COMMENT ON COLUMN "DOCS"."DOC_INDEX_JSON" IS 'Extracted index as structured JSON with topics and page references';
   COMMENT ON COLUMN "DOCS"."DOC_INTRODUCTION" IS 'Introduction section extracted separately';
   COMMENT ON COLUMN "DOCS"."DOC_EXECUTIVE_SUMMARY" IS 'Executive summary (high-value content)';
   COMMENT ON COLUMN "DOCS"."DOC_PREFACE" IS 'Preface/foreword (typically removed from main content)';
   COMMENT ON COLUMN "DOCS"."HAS_STRUCTURED_SECTIONS" IS 'Y if document has identifiable sections (ToC, intro, index)';
   COMMENT ON COLUMN "DOCS"."SECTION_MARKERS_JSON" IS 'JSON array of section boundaries for intelligent chunking';
   COMMENT ON COLUMN "DOCS"."FRONT_MATTER_REMOVED" IS 'Y if copyright, ToC, and preface were removed from main text';
   COMMENT ON TABLE "DOCS"  IS 'Stores uploaded enterprise documents, metadata, extracted text, summaries, and AI processing info.';
